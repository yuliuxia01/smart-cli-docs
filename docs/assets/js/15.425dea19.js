(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{368:function(t,s,a){"use strict";a.r(s);var _=a(42),r=Object(_.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"生产打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产打包"}},[t._v("#")]),t._v(" 生产打包")]),t._v(" "),a("p",[a("code",[t._v("sh build.sh")]),t._v("：生产环境编译打包，具体用法：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" build.sh\n")])])]),a("p",[t._v("命令执行成功，会在项目根目录下生产一个output目录，output目录下有一个<app_name>.tar.gz的压缩目录。eg：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("app_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n├─ output\n│  └─ dist"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("swan"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz\n")])])]),a("h4",{attrs:{id:"build-sh-主要工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-sh-主要工作"}},[t._v("#")]),t._v(" build.sh 主要工作：")]),t._v(" "),a("ul",[a("li",[t._v("将<app_name>项目名称赋值给一个变量，具体命令："),a("code",[t._v('APP_NAME="dist-swan"')])]),t._v(" "),a("li",[t._v("删除项目根目录下的dist文件，具体命令："),a("code",[t._v("rm -rf dist")]),t._v("；")]),t._v(" "),a("li",[t._v("重新安装package.json中的依赖，具体命令："),a("code",[t._v("npm install --registry=<baidu_registry> --no-progress")]),t._v("；")]),t._v(" "),a("li",[t._v("在根目录下新建output目录，并在output目录下新建一个名称为<app_name>的目录，具体命令："),a("code",[t._v("mkdir -p $CURRENT_PATH/output/$APP_NAME")]),t._v("；")]),t._v(" "),a("li",[t._v("执行"),a("code",[t._v("npm run build")]),t._v("命令；")]),t._v(" "),a("li",[t._v("拷贝根目录下的dist目录下的所有文件到ouput/<app_name>下，具体命令："),a("code",[t._v("cp -rf dist/* $CURRENT_PATH/output/$APP_NAME")]),t._v("；")]),t._v(" "),a("li",[t._v("将output目录下的所有文件目录打包到<app_name>.tar.gz压缩文件里，具体命令："),a("code",[t._v("cd $CURRENT_PATH/output && tar zcvf $APP_NAME.tar.gz $APP_NAME)")]),t._v("。")])]),t._v(" "),a("h4",{attrs:{id:"npm-run-build-的主要工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-run-build-的主要工作"}},[t._v("#")]),t._v(" npm run build 的主要工作：")]),t._v(" "),a("ul",[a("li",[t._v("读取配置文件；")]),t._v(" "),a("li",[t._v("根据配置文件的"),a("a",{attrs:{href:"/config#rules"}},[t._v("rules配置")]),t._v("，将相应的文件处理成目标文件，eg：less/stylus文件处理成css文件；")]),t._v(" "),a("li",[t._v("根据配置文件的"),a("a",{attrs:{href:"/config#paths"}},[t._v("paths配置")]),t._v("，将上面处理好的文件输出到指定的dist目录中。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);